{% extends "base.html" %}
{% load static %}
{% load blog_tags %}
{% block title %}Recent Posts{% endblock title %}

{% block content %}
<div style="margin-top:70px;">
    <header>
        <div class="hdr">
            <h1>MY BLOG</h1>
            <p>Welcome to my blog</p>
        </div>
    </header>
    <section>
        <div class="container-fluid">
            <div class="row mx-auto mb-4 w-100 ">
                <div class="col-xs-12 col-md-7">
                    <div class="col-xs-12 col-md-12 mb-3">
                        <div class="row w-100">
                            {% for post in posts %}
                                <div class="col-xs-12 col-md-12 mb-3 w-100">
                                    <div class="card my-shadow" >
                                        <div class="my-max-height">
                                            <img src="{{ post.picture.url }}" class="card-img-top img-fluid" >
                                        </div>
                                        <div class="card-body">
                                            <h5 class="card-title fw-bold my-margin">{{ post.title }}</h5>
                                            <h5 class="card-title my-margin">Published {{ post.publish }} by<span class="text-muted">
                                                {{ post.author }},
                                            </span> </h5>
                                            <p class="card-tex my-margint"> {{ post.body|truncatewords:40|linebreaks }}</p>
                                        <div class="my-footer d-flex justify-content-between align-items-center">
                                            <a href="{{ post.get_absolute_url}}" id="my-btn">READ MORE</a>
                                            {% with post.comments.count as total_comments %}
                                                <p class="fw-bold">Comments <span class=" badge rounded bg-dark">{{ total_comments }}</span> </p>
                                            {% endwith %}
                                        </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <div class="col-xs-12 col-md-5 " id="res-margin">
                    <div class="row w-100">
                        <div class="col-12 col-md-12 w-100" id="res-margin">
                            <div class="card my-shadow" >
                                <img src="{% static "images/avatar_g.jpg" %}" class="card-img-top" alt="...">
                                <div class="card-body">
                                <h5 class="card-title fw-bold my-margin">MY NAME</h5>
                                <p class="text-muted">I've written {% total_posts %} posts so far</p>
                                <p class="card-text">Just me, myself and I, exploring the universe of uknownment.I want to share my world with you.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-3 w-100 mt-5" id="res-margin">
                            <div class="card w-100 my-shadow" >
                                <div class="card-header py-3 fw-bold fs-4">
                                    Popular Posts
                                </div>
                                <ul class="list-group list-group-flush">
                                    {% for most_commented_post in most_commented_posts %}
                                        <a style="text-decoration:none" href="{{ most_commented_post.get_absolute_url}}">
                                            <li class="list-group-item lst py-3">
                                                <div class="w-100 my-hover" style="display: flex;  justify-content: start; align-items:center">
                                                    
                                                        <img class="" style="height:50px;width:80px;" src="{{most_commented_post.picture.url}}">
                                                    <div class="d-flex ms-3" style="flex-direction: column;">
                                                        <span>{{ most_commented_post.title }}</span>
                                                        <div>{{ most_commented_post.body|truncatewords:5 }}</div>
                                                    </div>
                                                </div>
                                            </li>
                                        </a>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                        <div class="col-12 col-md-12 w-100 mt-5" id="res-margin">
                            <div class="card my-shadow" >
                                <div class="card-header py-3 fw-bold fs-4">
                                    Tags
                                </div>
                                <ul class="list-group list-group-flush">
                                <li class="list-group-item">
                                    {% for tag in tags%}
                                        <a style="text-decoration:none">
                                            <span class="badge bg-secondary text-light">{{tag.name}}</span>
                                        </a>
                                    {% endfor %}
                                </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
<footer class="py-5 px-3">
    <div class="container">
      <div class="row gy-4">
        <div class="col-lg-5">
          <h4>www.myblog.com</h4>
          <p class="text-muted">incidunt et ea quo dolore laudantium consectetur!</p>
        </div>
        <div class="col-lg-3 offset-lg-1">
          <h4 class="fw-bold border-bottom border-4 border-warning pb-3 w-75">Links</h4>
          <p>
            <a class="my-link" href="{% url "blog:home" %}">Home</a>
          </p><p>
            <a class="my-link" href="{% url "blog:post_list" %}">Posts</a>
          </p>
        </div>
        <div class="col-lg-3">
          <h4 class="fw-bold border-bottom border-4 border-success pb-3 w-75">Services</h4>
          <p>Educational Articles</p>
          <p>Add Articles</p>
          <p>Share Your Thoughts</p>
        </div>
      </div>
    </div>
  </footer>
{% endblock %}